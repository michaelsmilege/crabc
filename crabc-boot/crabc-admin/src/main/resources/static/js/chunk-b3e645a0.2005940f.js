(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b3e645a0"],{"0778":function(t,e,n){"use strict";n("8bcd")},2095:function(t,e,n){"use strict";n("d3b7"),n("a9e3"),n("a15b"),n("d81d");var a=n("f933"),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=0;return t.split("").reduce((function(t,a){var i=a.charCodeAt(0);return(n+=i>=0&&i<=128?1:2)<=e?t+a:t}),"")},o={name:"Ellipsis",components:{Tooltip:a.a},props:{prefixCls:{type:String,default:"ant-pro-ellipsis"},tooltip:{type:Boolean},length:{type:Number,required:!0},lines:{type:Number,default:1},fullWidthRecognition:{type:Boolean,default:!1}},methods:{getStrDom:function(t,e){return(0,this.$createElement)("span",[i(t,this.length)+(e>this.length?"...":"")])},getTooltip:function(t,e){var n=this.$createElement;return n(a.a,[n("template",{slot:"title"},[t]),this.getStrDom(t,e)])}},render:function(){var t=this.$props,e=t.tooltip,n=t.length,a=this.$slots.default.map((function(t){return t.text})).join(""),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("").reduce((function(t,e){var n=e.charCodeAt(0);return n>=0&&n<=128?t+1:t+2}),0)}(a);return e&&i>n?this.getTooltip(a,i):this.getStrDom(a,i)}},s=n("2877"),r=Object(s.a)(o,void 0,void 0,!1,null,null,null);e.a=r.exports},"8bcd":function(t,e,n){},fe15:function(t,e,n){"use strict";n.r(e);var a=n("c7eb"),i=n("1da1"),o=(n("d3b7"),n("159b"),n("2b0e")),s={data:function(){return{message:[{name:"全部",val:"-1"},{name:"已读消息",val:"1"},{name:"未读消息",val:"0"}],enterColumns:[{title:"消息类型",dataIndex:"topic",key:"topic",width:200},{title:"消息内容",dataIndex:"content",key:"content",ellipsis:!0,scopedSlots:{customRender:"content"}},{title:"消息时间",dataIndex:"newData",key:"newData",ellipsis:!0,width:130,scopedSlots:{customRender:"newData"}},{title:"操作",dataIndex:"readStatus",width:100,scopedSlots:{customRender:"readStatus"}}],form:{msgType:"",pageCurrent:1,pageSize:10,type:"-1"},ishow:!1,client:{},eventList:[]}},created:function(){this.ininData(),this.getEvenList()},computed:{tNumer:function(){var t=this.client.total;return Math.ceil(t/10)}},methods:{getClientList:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.account.client(t.form);case 2:0===(n=e.sent).code&&((i=n.data||{}).list.forEach((function(e){o.default.set(e,"newData",t.formdata(e.creationTime)),o.default.set(e,"isMode",!1)})),t.client=i,t.ishow=!0);case 4:case"end":return e.stop()}}),e)})))()},formdata:function(t){var e=t,n=(new Date).getTime()-new Date(e).getTime(),a=(Math.floor(n/6e4),Math.floor(n/864e5)),i=n%864e5,o=Math.floor(i/36e5),s=i%36e5,r=Math.floor(s/6e4),l=s%6e4,u=Math.round(l/1e3);return n>864e5?a+"天前":n>36e5&&n<864e5?o+"小时前":n>6e4&&n<864e5&&n<36e5?r+"分钟前":u+"秒前"},getEvenList:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.eventList.push({defaultTitleTpl:"开发权限审批结果通知"}),t.eventList.push({defaultTitleTpl:"服务发布审批结果通知"}),t.eventList.push({defaultTitleTpl:"服务调用审批结果通知"}),t.eventList.push({defaultTitleTpl:"应用审批结果通知"}),t.eventList.push({defaultTitleTpl:"服务授权通知"}),t.eventList.push({defaultTitleTpl:"应用变更通知"}),t.eventList.push({defaultTitleTpl:"应用关联通知"});case 7:case"end":return e.stop()}}),e)})))()},ininData:function(){this.form.pageCurrent=1,this.getClientList()},handleOk:function(t){var e=this;this.$api.account.markRead({messageIds:t.messageId,type:t.noticeType}).then((function(n){0===n.code&&(o.default.set(t,"isMode",!1),e.ininData(),e.$message.info("已读成功"),e.$store.dispatch("getMessageNum"))}))},handleCancel:function(t){o.default.set(t,"isMode",!1)},onTag:function(t){o.default.set(t,"isMode",!0)},onChange:function(t){this.form.pageCurrent=t,this.getClientList()},onShowSizeChange:function(t,e){this.form.pageCurrent=1,this.form.pageSize=e,this.getClientList()},onSeach:function(){this.ininData()}},components:{Ellipsis:n("2095").a}},r=(n("0778"),n("2877")),l=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-message-center"},[n("div",{staticClass:"page-message-select"},[n("a-row",{attrs:{type:"flex",justify:"end",gutter:16}},[n("a-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.message,(function(e){return n("a-radio-button",{key:e.name,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1),n("a-row",{staticStyle:{margin:"0 30px"},attrs:{type:"flex",align:"middle"}},[n("div",{staticClass:"page-measage-title"},[t._v("消息类型：")]),n("a-select",{staticStyle:{width:"180px"},attrs:{"default-value":"",getPopupContainer:function(t){return t.parentNode}},model:{value:t.form.msgType,callback:function(e){t.$set(t.form,"msgType",e)},expression:"form.msgType"}},[n("a-select-option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.eventList,(function(e){return n("a-select-option",{key:e.defaultTitleTpl,attrs:{value:e.defaultTitleTpl}},[t._v(t._s(e.defaultTitleTpl))])}))],2)],1),n("a-button",{attrs:{type:"primary"},on:{click:t.onSeach}},[t._v("查询")])],1)],1),n("div",{staticClass:"page-measage-table"},[n("a-table",{attrs:{columns:t.enterColumns,"data-source":t.client.list,pagination:!1,rowKey:function(t,e){return e},scroll:{x:900}},scopedSlots:t._u([{key:"content",fn:function(e){return[n("a-tooltip",{attrs:{title:e}},[t._v(t._s(e))])]}},{key:"newData",fn:function(e,a){return[n("a-popover",{attrs:{placement:"topLeft"}},[n("template",{slot:"content"},[n("div",[t._v(t._s(a.creationTime))])]),n("div",{staticStyle:{cursor:"pointer"}},[t._v(t._s(e))])],2)]}},{key:"readStatus",fn:function(e,a){return["Y"!==e?n("div",{on:{click:function(e){return t.onTag(a)}}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("标记已读")])]):n("div",[t._v("已读")]),n("a-modal",{attrs:{title:"标记已读",visible:a.isMode,maskClosable:!1},on:{ok:function(e){return t.handleOk(a)},cancel:function(e){return t.handleCancel(a)}}},[n("div",[t._v("你确定已读： "+t._s(a.topic))])])]}}])}),t.ishow?n("a-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{size:"small","show-quick-jumper":"","show-size-changer":"",pageSizeOptions:["10","20","50","100"],total:t.client.total,"page-size":t.form.pageSize,"show-total":function(t){return"共 "+t+"条"}},on:{showSizeChange:t.onShowSizeChange,change:t.onChange},model:{value:t.form.pageCurrent,callback:function(e){t.$set(t.form,"pageCurrent",e)},expression:"form.pageCurrent"}}):t._e()],1)])}),[],!1,null,"7eaed429",null);e.default=l.exports}}]);